!function(e){function t(t){for(var o,a,s=t[0],c=t[1],u=t[2],f=0,h=[];f<s.length;f++)a=s[f],r[a]&&h.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(l&&l(t);h.length;)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={0:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([1457,1]),n()}({1457:function(e,t,n){"use strict";n.r(t);n(31);var o=n(534),r=function(e){return Array.isArray(e)?e.reduce(function(e,t){return e[t.name]=t.value,e},{}):e||{}};function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sprite=void 0;var o=n.x,r=n.y,i=n.texture,a=n.frame;this.sprite=t.add.sprite(o,r,i,a),this.sprite.y-=this.sprite.height*this.sprite.originY,n.scale&&this.sprite.setScale(n.scale),n.depth&&this.sprite.setDepth(n.depth)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.sprite.destroy(),delete this.sprite}}])&&i(t.prototype,n),o&&i(t,o),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=l(this,f(t).call(this,e,n))).map=void 0,o.tileset=void 0,o.tileLayers=void 0,o.objects=void 0,o.markers=void 0,o.zones=void 0,o.currentAreaKey=void 0,o.areaMap=void 0,o.backgroundSets=void 0,o.adventurer=void 0,o.background=void 0,o.tileLayers=[],o.objects={},o.markers={},o.zones={},o.currentAreaKey="",o.areaMap={},o.backgroundSets={},o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,Phaser.Plugins.ScenePlugin),n=t,(o=[{key:"registerArea",value:function(e,t,n,o){this.areaMap[e]={mapKey:t,tilesetName:n,tilesetKey:o}}},{key:"registerBackgroundSet",value:function(e,t){this.backgroundSets[e]=t}},{key:"load",value:function(e){this.currentAreaKey=e;var t=this.areaMap[e],n=this.scene.make.tilemap({key:t.mapKey}),o=n.addTilesetImage(t.tilesetName,t.tilesetKey);this.map=n,this.tileset=o,this.tileLayers=[],this.objects={},this.loadMarkers(),this.loadZones(),this.createBackground(r(this.map.properties)),this.createTileLayers(this.map.layers.map(function(e){return e.name})),this.createObjectLayers(this.map.objects.map(function(e){return e.name}))}},{key:"unload",value:function(){this.currentAreaKey="",this.objects={},this.markers={},this.zones={},this.tileLayers.forEach(function(e){return e.destroy()}),this.tileLayers=[],delete this.tileset,this.map&&this.map.destroy(),this.background&&this.background.destroy()}},{key:"placeEntityAtMarker",value:function(e,t){var n=this.markers[t],o=e.getComponent(a).sprite;e.getComponent(a).sprite.setPosition(n.x,n.y-o.height*o.originY)}},{key:"getTileLayer",value:function(e){return this.tileLayers.find(function(t){return t.layer.name===e})}},{key:"getZone",value:function(e){return this.zones[e]}},{key:"getCollisionMap",value:function(){return r(this.map.properties).entityLayerCollisions.split(",").reduce(function(e,t){var n=c(t.split(":"),2),o=n[0],r=n[1];return e[o]=e[o]||[],e[o].push(r),e},{})}},{key:"loadMarkers",value:function(){var e=this;this.map.objects.forEach(function(t){t.objects.forEach(function(t){r(t.properties).marker&&(e.markers[t.name]={x:t.x,y:t.y})})})}},{key:"loadZones",value:function(){var e=this;this.map.objects.forEach(function(t){t.objects.forEach(function(t){r(t.properties).zone&&(e.zones[t.name]={x:t.x,y:t.y,width:t.width,height:t.height})})})}},{key:"createTileLayers",value:function(e){var t=this;e.forEach(function(e){return t.createTileLayer(e)})}},{key:"createTileLayer",value:function(e){var t=this.map.createStaticLayer(e,this.tileset),n=r(t.layer.properties);n.collides&&(t.forEachTile(function(e){e.setCollision(!0,!0,!0,!0,!1)},this,0,0,t.width,t.height,{isNotEmpty:!0}),t.calculateFacesWithin(0,0,t.width,t.height)),t.setDepth(n.depth),this.tileLayers.push(t)}},{key:"createObjectLayers",value:function(e){var t=this;e.forEach(function(e){return t.createObjects(e)})}},{key:"createObjects",value:function(e){var t=this,n=this.map.getObjectLayer(e),o=r(n.properties),i=n.objects;this.objects[e]=[];var a=this.scene;i.forEach(function(n){var r=null;n.type&&(r=a.phecs.phEntities.createPrefab(n.type,n.properties,o.depth,n.x,n.y)),t.objects[e].push(r)})}},{key:"createBackground",value:function(e){if(e.backgroundSet){var t=this.backgroundSets[e.backgroundSet].map(function(e){return{key:e}});this.background=this.scene.add.parallaxSprite(t),this.background.scrollWithCamera(this.scene.cameras.main)}else e.backgroundColor&&this.scene.cameras.main.setBackgroundColor("#".concat(e.backgroundColor))}}])&&u(n.prototype,o),i&&u(n,i),t}();function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}var x=function(){function e(){g(this,e),this.onPressListeners=void 0,this.onReleaseListeners=void 0,this.isPressed=void 0,this.onPressListeners=[],this.onReleaseListeners=[],this.isPressed=!1}return C(e,[{key:"onPress",value:function(e,t){var n=this,o=y();return this.onPressListeners.push({id:o,context:t,callback:e}),function(){var e=n.onPressListeners.findIndex(function(e){return e.id===o});n.onPressListeners.splice(e,1)}}},{key:"onRelease",value:function(e,t){var n=this,o=y();return this.onReleaseListeners.push({id:o,context:t,callback:e}),function(){var e=n.onReleaseListeners.findIndex(function(e){return e.id===o});n.onReleaseListeners.splice(e,1)}}},{key:"press",value:function(){if(!this.isPressed){var e=!0,t=!1,n=void 0;try{for(var o,r=this.onPressListeners[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;i.callback.call(i.context)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}this.isPressed=!0}},{key:"release",value:function(){if(this.isPressed){var e=!0,t=!1,n=void 0;try{for(var o,r=this.onReleaseListeners[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;i.callback.call(i.context)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}this.isPressed=!1}},{key:"destroy",value:function(){this.onPressListeners=[],this.onReleaseListeners=[]}}]),e}(),k=function(e){function t(e,n){var o;return g(this,t),(o=v(this,m(t).call(this,e,n))).left=void 0,o.right=void 0,o.up=void 0,o.down=void 0,o.action=void 0,o.shoot=void 0,o.left=new x,o.right=new x,o.up=new x,o.down=new x,o.action=new x,o.shoot=new x,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,Phaser.Plugins.ScenePlugin),C(t,[{key:"start",value:function(){this.startListening(),this.scene.events.once(Phaser.Scenes.Events.SHUTDOWN,this.shutdown,this)}},{key:"stop",value:function(){this.scene.events.off(Phaser.Scenes.Events.SHUTDOWN,this.shutdown,this),this.shutdown()}},{key:"startListening",value:function(){this.scene.input.keyboard.on(Phaser.Input.Keyboard.Events.ANY_KEY_DOWN,this.onPress,this),this.scene.input.keyboard.on(Phaser.Input.Keyboard.Events.ANY_KEY_UP,this.onRelease,this)}},{key:"shutdown",value:function(){this.scene.input.keyboard.off(Phaser.Input.Keyboard.Events.ANY_KEY_DOWN,this.onPress,this),this.scene.input.keyboard.off(Phaser.Input.Keyboard.Events.ANY_KEY_UP,this.onRelease,this),this.left.destroy(),this.right.destroy(),this.up.destroy(),this.down.destroy(),this.action.destroy(),this.shoot.destroy()}},{key:"onPress",value:function(e){switch(e.code){case"ArrowLeft":this.left.press();break;case"ArrowRight":this.right.press();break;case"ArrowUp":this.up.press();break;case"ArrowDown":this.down.press();break;case"KeyF":this.action.press();break;case"Space":this.shoot.press()}}},{key:"onRelease",value:function(e){switch(e.code){case"ArrowLeft":this.left.release();break;case"ArrowRight":this.right.release();break;case"ArrowUp":this.up.release();break;case"ArrowDown":this.down.release();break;case"KeyF":this.action.release();break;case"Space":this.shoot.release()}}}]),t}();function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var O=function(){function e(t,n,o,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.layers=void 0,this.scene=t,o=o||t.cameras.main.centerX,r=r||t.cameras.main.centerY,i=i||t.cameras.main.width,a=a||t.cameras.main.height;var s=n.length;this.layers=n.map(function(e,n){var c=t.add.tileSprite(o,r,i,a,e.key);return c.setScrollFactor(0),{tileSprite:c,scrollFactor:(n+1)/s*.2}})}var t,n,o;return t=e,(n=[{key:"scrollWithCamera",value:function(e){var t=this;this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,function(){return t.setOffset(e.scrollX)})}},{key:"setOffset",value:function(e){this.layers.forEach(function(t){t.tileSprite.setTilePosition(t.scrollFactor*e)})}},{key:"destroy",value:function(){this.layers.forEach(function(e){e.tileSprite.destroy()})}}])&&P(t.prototype,n),o&&P(t,o),e}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=j(this,T(t).call(this,e)),e.registerGameObject("parallaxSprite",n.createParallaxSprite),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,Phaser.Plugins.BasePlugin),n=t,(o=[{key:"createParallaxSprite",value:function(e,t,n,o,r){return new O(this.scene,e,t,n,o,r)}}])&&E(n.prototype,o),r&&E(n,r),t}();function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.progression=void 0,this.oldLady=[{conversationId:"oldLady1",unlockDependencies:[],completed:!1},{conversationId:"oldLady2",unlockDependencies:[{type:"conversation",name:"oldMan",index:0}],completed:!1},{conversationId:"oldLady3",unlockDependencies:[{type:"quest",name:"saveFarm",index:0}],completed:!1}],this.oldMan=[{conversationId:"oldMan1",unlockDependencies:[],completed:!1},{conversationId:"oldMan2",unlockDependencies:[{type:"conversation",name:"oldMan",index:0}],completed:!1},{conversationId:"oldMan3",unlockDependencies:[{type:"quest",name:"saveFarm",index:0}],completed:!1}],this.progression=t}var t,n,o;return t=e,(n=[{key:"getCurrentConversationId",value:function(e){return this.getCurrentConversation(e).conversationId}},{key:"markCurrentConversationComplete",value:function(e){this.getCurrentConversation(e).completed=!0}},{key:"isUnlocked",value:function(e){return this.progression.areCompleted(e.unlockDependencies)}},{key:"isCompleted",value:function(e){switch(e.name){case"oldLady":return this.oldLady[e.index].completed;case"oldMan":return this.oldMan[e.index].completed;default:throw new Error("ConversationDocument::CANNOT_CHECK_IF_COMPLETE::INVALID_CONVERSATION_NAME")}}},{key:"fromJson",value:function(e){var t=this;e.oldLady.forEach(function(e,n){t.oldLady[n].completed=e}),e.oldMan.forEach(function(e,n){t.oldMan[n].completed=e})}},{key:"toJson",value:function(){return{oldLady:this.oldLady.map(function(e){return e.completed}),oldMan:this.oldMan.map(function(e){return e.completed})}}},{key:"reset",value:function(){this.oldLady.forEach(function(e){return e.completed=!1}),this.oldMan.forEach(function(e){return e.completed=!1})}},{key:"getCurrentConversation",value:function(e){var t=null;switch(e){case"oldLady":t=this.oldLady;break;case"oldMan":t=this.oldMan;break;default:throw new Error("ConversationDocument::CANNOT_GET_CURRENT_CONVERSATION_ID::INVALID_CONVERSATION_NAME")}for(var n=0,o=0;o<t.length;o++)this.isUnlocked(t[o])&&(n=o);return t[n]}}])&&I(t.prototype,n),o&&I(t,o),e}();function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conversations=void 0,this.reset()}var t,n,o;return t=e,(n=[{key:"areCompleted",value:function(e){var t=this;return e.every(function(e){switch(e.type){case"conversation":return t.conversations.isCompleted(e);case"quest":return!1}})}},{key:"reset",value:function(){this.conversations=new M(this)}},{key:"fromJson",value:function(e){this.conversations.fromJson(e.conversations)}},{key:"toJson",value:function(){return{conversations:this.conversations.toJson()}}}])&&R(t.prototype,n),o&&R(t,o),e}();function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propNames=void 0,this.onChangeListeners=void 0,this.data=void 0,this.propNames=t,this.onChangeListeners={},this.data={},Object.defineProperties(this,t.reduce(function(e,t){var n={get:function(){return this.data[t]},set:function(e){this.data[t]=e,(this.onChangeListeners[t]||[]).forEach(function(t){return t(e)})}};return e[t]=n,e},{}))}var t,n,o;return t=e,(n=[{key:"onChange",value:function(e,t){var n=this;return this.onChangeListeners[e]=this.onChangeListeners[e]||[],this.onChangeListeners[e].push(t),function(){var o=n.onChangeListeners[e].findIndex(function(e){return e==t});n.onChangeListeners[e].splice(o,1)}}},{key:"toJson",value:function(){var e=this;return this.propNames.reduce(function(t,n){return t[n]=e.data[n],t},{})}},{key:"fromJson",value:function(e){var t=this;this.propNames.forEach(function(n){t.data[n]=e[n]})}}])&&D(t.prototype,n),o&&D(t,o),e}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function F(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=F(this,K(t).call(this,["maxHealth","health"]))).maxHealth=void 0,e.health=void 0,e.reset(),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,B),n=t,(o=[{key:"reset",value:function(){this.maxHealth=0,this.health=0}}])&&H(n.prototype,o),r&&H(n,r),t}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=V(this,Y(t).call(this,["areaKey","markerName"]))).areaKey=void 0,e.markerName=void 0,e.reset(),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,B),n=t,(o=[{key:"reset",value:function(){this.areaKey="",this.markerName=""}}])&&U(n.prototype,o),r&&U(n,r),t}();function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te="archer-adventure-save-game",ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Q(this,$(t).call(this,e))).data=void 0,n.progression=void 0,n.adventurer=void 0,n.location=void 0,n.data={},n.progression=new L,n.adventurer=new X,n.location=new J,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,Phaser.Plugins.BasePlugin),n=t,(o=[{key:"hasSaveGame",value:function(){return null!=localStorage.getItem(te)}},{key:"resetSaveGame",value:function(){this.hasSaveGame()&&(this.progression.reset(),this.adventurer.reset(),this.location.reset(),this.save())}},{key:"save",value:function(){this.data.progression=this.progression.toJson(),this.data.adventurer=this.adventurer.toJson(),this.data.location=this.location.toJson(),localStorage.setItem(te,JSON.stringify(this.data))}},{key:"load",value:function(){var e=localStorage.getItem(te);if(!e)throw new Error("PERSISTENCE_PLUGIN::NO_SAVED_DATA");this.data=JSON.parse(e),this.progression.fromJson(this.data.progression),this.adventurer.fromJson(this.data.adventurer),this.location.fromJson(this.data.location)}}])&&q(n.prototype,o),r&&q(n,r),t}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=void 0,this.id=void 0,this.components=void 0,this.type=t,this.id=y(),this.components=[]}var t,n,o;return t=e,(n=[{key:"getComponent",value:function(e){var t=this.components.find(function(t){return t instanceof e});if(t)return t;throw new Error("BaseEntity::NO_COMPONENT_".concat(oe(e)))}},{key:"hasComponent",value:function(e){return this.components.some(function(t){return t instanceof e})}}])&&re(t.prototype,n),o&&re(t,o),e}();function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){se(e,t,n[t])})}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.prefabs=void 0,this.entitiesById=void 0,this.entities=void 0,this.scene=t,this.prefabs={},this.entitiesById={},this.entities=[]}var t,n,o;return t=e,(n=[{key:"registerPrefab",value:function(e,t){this.prefabs[e]=t}},{key:"createPrefab",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.scene,s=new ie(e),c=this.prefabs[e],u=ae({x:o,y:i,depth:n},r(t));return this.getComponentDefinitions(c).forEach(function(e){var t=new e.component(a,ae({},u,e.data),s);s.components.push(t)}),this.entitiesById[s.id]=s,this.entities.push(s),s}},{key:"getEntityById",value:function(e){return this.entitiesById[e]}},{key:"getEntities",value:function(e){if("string"==typeof e)return this.getEntitiesByType(e);if("function"==typeof e)return this.getEntitiesByComponent(e);throw new Error("Phecs.EntityManager::BAD_ENTITY_IDENTIFIER::".concat(e))}},{key:"destroy",value:function(){this.entities.forEach(function(e){e.components.forEach(function(e){return e.destroy()})}),this.entitiesById={},this.entities=[]}},{key:"getComponentDefinitions",value:function(e){return e.components.map(function(e){return"function"==typeof e?{component:e}:e})}},{key:"getEntitiesByComponent",value:function(e){return this.entities.filter(function(t){return t.hasComponent(e)})}},{key:"getEntitiesByType",value:function(e){return this.entities.filter(function(t){return t.type===e})}}])&&ce(t.prototype,n),o&&ce(t,o),e}();function le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.systems=void 0,this.scene=t,this.systems=[]}var t,n,o;return t=e,(n=[{key:"start",value:function(e){this.systems.forEach(function(t){t.start&&t.start(e)})}},{key:"stop",value:function(e){this.systems.forEach(function(t){t.stop&&t.stop(e)})}},{key:"update",value:function(e){this.systems.forEach(function(t){t.update&&t.update(e)})}},{key:"destroy",value:function(){this.systems.forEach(function(e){e.destroy&&e.destroy()}),this.systems=[]}},{key:"registerSystems",value:function(e){var t=this;e.forEach(function(e){t.systems.push(new e(t.scene))})}}])&&le(t.prototype,n),o&&le(t,o),e}();function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ye(this,de(t).call(this,e,n))).phEntities=void 0,o.phSystems=void 0,o.phEntities=new ue(e),o.phSystems=new fe(e),o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,Phaser.Plugins.ScenePlugin),n=t,(o=[{key:"start",value:function(){this.phSystems.start(this.phEntities),this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,this.update,this)}},{key:"stop",value:function(){this.phSystems.stop(this.phEntities),this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,this.update,this)}},{key:"update",value:function(){this.phSystems.update(this.phEntities)}},{key:"destroy",value:function(){this.phEntities.destroy()}},{key:"reset",value:function(){this.stop(),this.destroy()}},{key:"shutdown",value:function(){this.stop(),this.destroy(),this.phSystems.destroy()}}])&&pe(n.prototype,o),r&&pe(n,r),t}();function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function we(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=we(this,Ce(t).call(this,e,n))).states=void 0,o.sets=void 0,o.states={},o.sets={},o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,Phaser.Plugins.ScenePlugin),n=t,(o=[{key:"destroy",value:function(){this.states={},this.sets={}}},{key:"registerSets",value:function(e){var t=this;e.forEach(function(e){return t.addSet(e.id,e.states)})}},{key:"getState",value:function(e){return this.states[e]}},{key:"getSet",value:function(e){var t=this;return this.sets[e].map(function(e){return t.states[e]})}},{key:"addSet",value:function(e,t){var n=this;t.forEach(function(e){n.states[e.id]=e}),this.sets[e]=t.map(function(e){return e.id})}}])&&ge(n.prototype,o),r&&ge(n,r),t}();function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je,Te=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Oe(this,(e=Se(t)).call.apply(e,[this].concat(r)))).phecs=void 0,n.areaManager=void 0,n.stateRegistrar=void 0,n.persistence=void 0,n.controls=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,Phaser.Scene),t}(),_e={maxVelocity:350,horizontalAcceleration:800,horizontalDeceleration:2e3,slideVelocityThreshold:250,slideDeceleration:350,shortJumpVelocity:-350,jumpVelocity:-425,aerialMaxHorizontalVelocity:250,aerialHorizontalAcceleration:300,aerialHorizontalFrictionAcceleration:150};function Ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}!function(e){e[e.Initial=0]="Initial",e[e.PressControl=1]="PressControl",e[e.ReleaseControl=2]="ReleaseControl",e[e.Conditional=3]="Conditional",e[e.Timer=4]="Timer"}(je||(je={}));var Ie=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.body=void 0,t.physics.add.existing(o.getComponent(a).sprite);var r=o.getComponent(a).sprite;this.body=r.body,this.body.setSize(r.width,r.height),this.body.updateBounds(),n.maxVelocityX&&(this.body.maxVelocity.x=n.maxVelocityX)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.body.destroy(),delete this.body}}])&&Ae(t.prototype,n),o&&Ae(t,o),e}(),Me={transitions:[{type:je.Conditional,condition:function(e){return!e.getComponent(Ie).body.blocked.down},to:function(e){return e.getComponent(Ie).body.velocity.y=100,e.getComponent(Ie).body.velocity.x>0?"adventurer-fall-right":e.getComponent(Ie).body.velocity.x<0?"adventurer-fall-left":"adventurer-fall"}}]};function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){var n=[e.onEnter,t.onEnter].filter(Boolean),o=[e.onUpdate,t.onUpdate].filter(Boolean),r=[e.onLeave,t.onLeave].filter(Boolean),i=[e.transitions,t.transitions].filter(Boolean).flat(),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){Re(e,t,n[t])})}return e}({},e.data,t.data);return{id:e.id||t.id,transitions:i,data:a,onEnter:function(e,t){return n.forEach(function(n){return n(e,t)})},onUpdate:function(e,t){return o.forEach(function(n){return n(e,t)})},onLeave:function(e,t){return r.forEach(function(n){return n(e,t)})}}}var De=Le(Me,{onEnter:function(e){!function(e){e.getComponent(Ie).body.acceleration.x=e.getComponent(Ie).body.velocity.x<0?_e.horizontalDeceleration:-_e.horizontalDeceleration}(e)},onUpdate:function(e){!function(e){Phaser.Math.Within(e.getComponent(Ie).body.velocity.x,0,100)&&(e.getComponent(Ie).body.acceleration.x=0,e.getComponent(Ie).body.velocity.x=0)}(e)}}),Be=Le(De,{id:"adventurer-stand",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-stand")},transitions:[{type:je.PressControl,control:"right",to:"adventurer-run-right"},{type:je.PressControl,control:"left",to:"adventurer-run-left"},{type:je.PressControl,control:"down",to:"adventurer-crouch"},{type:je.PressControl,control:"up",to:"adventurer-jump-prep"},{type:je.PressControl,control:"shoot",to:"adventurer-stand-draw"}]});function Ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var He=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.entity=void 0,this.states=void 0,this.triggerCancelers=void 0,this.currentState=void 0,this.scene=t,this.entity=n,this.states=o,this.currentState={id:"dummy",transitions:[]},this.triggerCancelers=[]}var t,n,o;return t=e,(n=[{key:"update",value:function(){this.currentState.onUpdate&&this.currentState.onUpdate(this.entity,this.currentState.data||{})}},{key:"doTransition",value:function(e){this.cancelTransitionTriggers(),this.currentState.onLeave&&this.currentState.onLeave(this.entity,this.currentState.data||{});var t="string"==typeof e.to?e.to:e.to(this.entity);this.currentState=this.states.find(function(e){return e.id===t}),e.onTransition&&e.type!==je.Initial&&e.onTransition(this.entity),this.currentState.onEnter&&this.currentState.onEnter(this.entity,this.currentState.data||{}),this.registerTransitionTriggers()}},{key:"destroy",value:function(){this.cancelTransitionTriggers()}},{key:"cancelTransitionTriggers",value:function(){this.triggerCancelers.forEach(function(e){return e()}),this.triggerCancelers=[]}},{key:"registerTransitionTriggers",value:function(){var e=this;this.currentState.transitions.forEach(function(t){switch(t.type){case je.PressControl:e.registerPressControlTransitionTrigger(t);break;case je.ReleaseControl:e.registerReleaseControlTransitionTrigger(t);break;case je.Conditional:e.registerConditionalTransitionTrigger(t);break;case je.Timer:e.registerTimerTransitionTrigger(t)}})}},{key:"registerPressControlTransitionTrigger",value:function(e){var t=this,n=this.scene.controls[e.control].onPress(function(){return t.doTransition(e)});this.triggerCancelers.push(n)}},{key:"registerReleaseControlTransitionTrigger",value:function(e){var t=this,n=this.scene.controls[e.control].onRelease(function(){return t.doTransition(e)});this.triggerCancelers.push(n)}},{key:"registerConditionalTransitionTrigger",value:function(e){var t=this,n=function(){e.condition(t.entity)&&t.doTransition(e)};this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,n),this.triggerCancelers.push(function(){return t.scene.events.off(Phaser.Scenes.Events.POST_UPDATE,n)})}},{key:"registerTimerTransitionTrigger",value:function(e){var t=this,n="number"==typeof e.delay?e.delay:e.delay(),o=this.scene.time.delayedCall(n,function(){t.doTransition(e)});this.triggerCancelers.push(function(){return o.remove()})}}])&&Ne(t.prototype,n),o&&Ne(t,o),e}();function Fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ke=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.phiniteStateMachine=void 0;var r=t,i=r.stateRegistrar.getSet(n.stateSet),a=r.stateRegistrar.getState(n.initialStateId);this.phiniteStateMachine=new He(t,o,i),this.phiniteStateMachine.doTransition({type:je.Initial,to:a.id})}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.phiniteStateMachine.destroy(),delete this.phiniteStateMachine}}])&&Fe(t.prototype,n),o&&Fe(t,o),e}();function ze(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Xe=3,Ge=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shotPower=void 0,this.shotChargeRate=void 0,this.minShotPower=void 0,this.maxShotPower=void 0,this.arrows=void 0,this.entity=void 0;var r=t;this.entity=o,this.minShotPower=300,this.maxShotPower=700,this.shotChargeRate=15,this.shotPower=this.minShotPower,this.arrows=[];for(var i=0;i<Xe;i++){var s=r.phecs.phEntities.createPrefab("arrow",{},o.getComponent(a).sprite.depth,0,0);s.getComponent(Ke).phiniteStateMachine.doTransition({to:"arrow-disabled"}),this.arrows.push(s)}}var t,n,o;return t=e,(n=[{key:"shootArrow",value:function(){var e=this.getAvailableArrow();e.getComponent(a).sprite.x=this.entity.getComponent(a).sprite.x,e.getComponent(a).sprite.y=this.entity.getComponent(a).sprite.y,e.getComponent(Ke).phiniteStateMachine.doTransition({to:"arrow-flying"});var t=Phaser.Math.Clamp(this.shotPower,this.minShotPower,this.maxShotPower);this.entity.getComponent(a).sprite.flipX&&(t*=-1),e.getComponent(Ie).body.setVelocity(t,0),e.getComponent(Ie).body.setGravityY(-500),this.shotPower=this.minShotPower}},{key:"getAvailableArrow",value:function(){var e=this.arrows.filter(function(e){return"arrow-disabled"===e.getComponent(Ke).phiniteStateMachine.currentState.id}),t=this.arrows.filter(function(e){return"arrow-hit"===e.getComponent(Ke).phiniteStateMachine.currentState.id});if(e.length)return e[0];if(t.length)return t[0];throw new Error("ShootsArrows::shootArrow::NO_AVAILABLE_ARROWS")}},{key:"destroy",value:function(){this.arrows=[]}}])&&ze(t.prototype,n),o&&ze(t,o),e}(),Ue=Le(De,{id:"adventurer-stand-draw",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-stand-draw",!0)},onUpdate:function(e){e.getComponent(Ge).shotPower+=e.getComponent(Ge).shotChargeRate},transitions:[{type:je.Conditional,condition:function(e){return!e.getComponent(a).sprite.anims.isPlaying},to:"adventurer-stand-hold"},{type:je.ReleaseControl,control:"shoot",to:"adventurer-stand-shoot"},{type:je.PressControl,control:"left",to:"adventurer-stand-draw",onTransition:function(e){e.getComponent(a).sprite.flipX=!0}},{type:je.PressControl,control:"right",to:"adventurer-stand-draw",onTransition:function(e){e.getComponent(a).sprite.flipX=!1}}]}),Ve=Le(De,{id:"adventurer-stand-hold",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-stand-hold",!0)},onUpdate:function(e){e.getComponent(Ge).shotPower+=e.getComponent(Ge).shotChargeRate},transitions:[{type:je.ReleaseControl,control:"shoot",to:"adventurer-stand-shoot"},{type:je.PressControl,control:"left",to:"adventurer-stand-hold",onTransition:function(e){e.getComponent(a).sprite.flipX=!0}},{type:je.PressControl,control:"right",to:"adventurer-stand-hold",onTransition:function(e){e.getComponent(a).sprite.flipX=!1}}]});function Ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var We=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.scene=t}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){delete this.scene}}])&&Ye(t.prototype,n),o&&Ye(t,o),e}(),Je=Le(De,{id:"adventurer-stand-shoot",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-stand-shoot")},onLeave:function(e){e.getComponent(Ge).shootArrow()},transitions:[{type:je.Conditional,condition:function(e){return!e.getComponent(a).sprite.anims.isPlaying},to:function(e){var t=e.getComponent(We).scene.controls;return t.right.isPressed?"adventurer-run-right":t.left.isPressed?"adventurer-run-left":"adventurer-stand"}}]}),Ze=Le(De,{onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-crouch")},transitions:[{type:je.ReleaseControl,control:"down",to:function(e){var t=e.getComponent(We).scene.controls;return t.left.isPressed?"adventurer-run-left":t.right.isPressed?"adventurer-run-right":"adventurer-stand"}}]}),qe=Le(Ze,{id:"adventurer-crouch",transitions:[{type:je.PressControl,control:"left",to:"adventurer-crouch-left"},{type:je.PressControl,control:"right",to:"adventurer-crouch-right"}]}),Qe=Le(Ze,{id:"adventurer-crouch-left",onEnter:function(e){e.getComponent(a).sprite.flipX=!0},transitions:[{type:je.PressControl,control:"right",to:"adventurer-crouch-right"}]}),$e=Le(Ze,{id:"adventurer-crouch-right",onEnter:function(e){e.getComponent(a).sprite.flipX=!1},transitions:[{type:je.PressControl,control:"left",to:"adventurer-crouch-left"}]}),et=Le(Me,{onEnter:function(e){e.getComponent(a).sprite.flipX=!1,e.getComponent(a).sprite.anims.play("adventurer-run")},transitions:[{type:je.PressControl,control:"shoot",to:"adventurer-stand-draw"},{type:je.PressControl,control:"down",to:function(e){return Math.abs(e.getComponent(Ie).body.velocity.x)<_e.slideVelocityThreshold?"adventurer-crouch":"adventurer-slide"}},{type:je.PressControl,control:"up",to:"adventurer-jump-prep"}]});function tt(e,t){"left"===t?e.getComponent(Ie).body.acceleration.x=-_e.horizontalAcceleration:"right"===t&&(e.getComponent(Ie).body.acceleration.x=_e.horizontalAcceleration),function(e){Phaser.Math.Within(e.getComponent(Ie).body.velocity.x,0,5)||(e.getComponent(Ie).body.velocity.x+=.5*e.getComponent(Ie).body.velocity.x*-1)}(e)}var nt=Le(et,{id:"adventurer-run-right",onEnter:function(e){e.getComponent(a).sprite.flipX=!1,e.getComponent(a).sprite.anims.play("adventurer-run"),tt(e,"right")},transitions:[{type:je.ReleaseControl,control:"right",to:"adventurer-stand"},{type:je.PressControl,control:"left",to:"adventurer-run-left"}]}),ot=Le(et,{id:"adventurer-run-left",onEnter:function(e){e.getComponent(a).sprite.flipX=!0,e.getComponent(a).sprite.anims.play("adventurer-run"),tt(e,"left")},transitions:[{type:je.ReleaseControl,control:"left",to:"adventurer-stand"},{type:je.PressControl,control:"right",to:"adventurer-run-right"}]}),rt=Le(Me,{id:"adventurer-slide",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-slide"),e.getComponent(Ie).body.velocity.x>0?e.getComponent(Ie).body.acceleration.x=-1*_e.slideDeceleration:e.getComponent(Ie).body.acceleration.x=_e.slideDeceleration},onUpdate:function(e){Phaser.Math.Within(e.getComponent(Ie).body.velocity.x,0,5)&&(e.getComponent(Ie).body.acceleration.x=0)},transitions:[{type:je.Conditional,condition:function(e){return!e.getComponent(a).sprite.anims.isPlaying},to:function(e){var t=e.getComponent(We).scene.controls;return t.left.isPressed?"adventurer-run-left":t.right.isPressed?"adventurer-run-right":t.down.isPressed?"adventurer-crouch":"adventurer-stand"}},{type:je.PressControl,control:"up",to:"adventurer-jump-prep"}]}),it={id:"adventurer-jump-prep",onEnter:function(e){e.getComponent(Ie).body.acceleration.x=0,e.getComponent(a).sprite.anims.play("adventurer-jump-prep")},transitions:[{type:je.Conditional,condition:function(e){return!e.getComponent(a).sprite.anims.isPlaying},to:function(e){var t=e.getComponent(We).scene.controls;return t.right.isPressed?"adventurer-jump-right":t.left.isPressed?"adventurer-jump-left":e.getComponent(Ie).body.velocity.x>0?"adventurer-jump-right":e.getComponent(Ie).body.velocity.x<0?"adventurer-jump-left":"adventurer-jump"},onTransition:function(e){e.getComponent(We).scene.controls.up.isPressed?e.getComponent(Ie).body.velocity.y=_e.jumpVelocity:e.getComponent(Ie).body.velocity.y=_e.shortJumpVelocity}}]};var at={onUpdate:function(e,t){var n=e.getComponent(Ie).body,o=e.getComponent(We).scene.controls;o.left.isPressed||o.right.isPressed?function(e,t){var n=e.getComponent(Ie).body,o=e.getComponent(We).scene.controls;o.left.isPressed&&n.velocity.x>t?n.acceleration.x=-1*_e.aerialHorizontalAcceleration:o.right.isPressed&&n.velocity.x<t&&(n.acceleration.x=_e.aerialHorizontalAcceleration)}(e,t.targetAerialHorizontalVelocity):function(e){var t=e.getComponent(Ie).body;t.velocity.x>0?t.acceleration.x=-1*_e.aerialHorizontalFrictionAcceleration:t.velocity.x<0?t.acceleration.x=_e.aerialHorizontalFrictionAcceleration:t.acceleration.x=0}(e),Phaser.Math.Within(t.targetAerialHorizontalVelocity,n.velocity.x,5)&&(n.acceleration.x=0,n.velocity.x=t.targetAerialHorizontalVelocity)}},st=Le(at,{onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-jump-rise")},transitions:[{type:je.PressControl,control:"shoot",to:"adventurer-air-draw"}]}),ct=Le(st,{id:"adventurer-jump",data:{targetAerialHorizontalVelocity:0},transitions:[{type:je.PressControl,control:"left",to:"adventurer-jump-left"},{type:je.PressControl,control:"right",to:"adventurer-jump-right"},{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.velocity.y>1},to:"adventurer-fall"}]}),ut=Le(st,{id:"adventurer-jump-left",data:{targetAerialHorizontalVelocity:-1*_e.aerialMaxHorizontalVelocity},onEnter:function(e){e.getComponent(a).sprite.flipX=!0},transitions:[{type:je.PressControl,control:"right",to:"adventurer-jump-right"},{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.velocity.y>0},to:"adventurer-fall-left"}]}),lt=Le(st,{id:"adventurer-jump-right",data:{targetAerialHorizontalVelocity:_e.aerialMaxHorizontalVelocity},onEnter:function(e){e.getComponent(a).sprite.flipX=!1},transitions:[{type:je.PressControl,control:"left",to:"adventurer-jump-left"},{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.velocity.y>0},to:"adventurer-fall-right"}]}),ft=Le(at,{onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-fall")},transitions:[{type:je.PressControl,control:"shoot",to:"adventurer-air-draw"},{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.blocked.down},to:function(e){var t=e.getComponent(We).scene.controls;return t.down.isPressed?Math.abs(e.getComponent(Ie).body.velocity.x)<_e.slideVelocityThreshold?"adventurer-crouch":"adventurer-slide":t.left.isPressed?"adventurer-run-left":t.right.isPressed?"adventurer-run-right":"adventurer-stand"}}]}),ht=[Be,Ue,Ve,Je,qe,Qe,$e,nt,ot,rt,it,ct,ut,lt,Le(ft,{id:"adventurer-fall",data:{horizontalMaxVelocity:0},transitions:[{type:je.PressControl,control:"left",to:"adventurer-fall-left"},{type:je.PressControl,control:"right",to:"adventurer-fall-right"}]}),Le(ft,{id:"adventurer-fall-left",data:{targetAerialHorizontalVelocity:-1*_e.aerialMaxHorizontalVelocity},onEnter:function(e){e.getComponent(a).sprite.flipX=!0},transitions:[{type:je.PressControl,control:"right",to:"adventurer-fall-right"}]}),Le(ft,{id:"adventurer-fall-right",data:{targetAerialHorizontalVelocity:_e.aerialMaxHorizontalVelocity},onEnter:function(e,t){e.getComponent(a).sprite.flipX=!1},transitions:[{type:je.PressControl,control:"left",to:"adventurer-fall-left"}]}),Le(at,{id:"adventurer-air-draw",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-air-draw",!0)},onUpdate:function(e){e.getComponent(Ge).shotPower+=e.getComponent(Ge).shotChargeRate},transitions:[{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.blocked.down},to:"adventurer-stand-hold"},{type:je.ReleaseControl,control:"shoot",to:"adventurer-air-shoot"},{type:je.Conditional,condition:function(e){return!e.getComponent(a).sprite.anims.isPlaying},to:"adventurer-air-hold"},{type:je.PressControl,control:"left",to:"adventurer-air-draw",onTransition:function(e){e.getComponent(a).sprite.flipX=!0}},{type:je.PressControl,control:"right",to:"adventurer-air-draw",onTransition:function(e){e.getComponent(a).sprite.flipX=!1}}]}),Le(at,{id:"adventurer-air-hold",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-air-hold",!0)},onUpdate:function(e){e.getComponent(Ge).shotPower+=e.getComponent(Ge).shotChargeRate},transitions:[{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.blocked.down},to:"adventurer-stand-hold"},{type:je.ReleaseControl,control:"shoot",to:"adventurer-air-shoot"},{type:je.PressControl,control:"left",to:"adventurer-air-hold",onTransition:function(e){e.getComponent(a).sprite.flipX=!0}},{type:je.PressControl,control:"right",to:"adventurer-air-hold",onTransition:function(e){e.getComponent(a).sprite.flipX=!1}}]}),Le(at,{id:"adventurer-air-shoot",onEnter:function(e){e.getComponent(a).sprite.anims.play("adventurer-air-shoot")},transitions:[{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.blocked.down},to:"adventurer-stand-shoot"},{type:je.Conditional,condition:function(e){return!e.getComponent(a).sprite.anims.isPlaying},to:function(e){return e.getComponent(Ie).body.velocity.y<0?"adventurer-jump":"adventurer-fall"},onTransition:function(e){e.getComponent(Ge).shootArrow()}}]})],pt={id:"arrow-flying",transitions:[{type:je.Conditional,condition:function(e){return!e.getComponent(Ie).body.blocked.none},to:"arrow-hit"}],onEnter:function(e){e.getComponent(a).sprite.active=!0,e.getComponent(a).sprite.visible=!0,e.getComponent(Ie).body.enable=!0,e.getComponent(Ie).body.allowGravity=!0,e.getComponent(Ie).body.setVelocity(400,0)},onUpdate:function(e){if(e.getComponent(Ie).body.blocked.none){var t=Math.atan2(e.getComponent(Ie).body.velocity.y,e.getComponent(Ie).body.velocity.x);e.getComponent(a).sprite.rotation=t}}},yt={id:"arrow-hit",transitions:[],onEnter:function(e){e.getComponent(Ie).body.setVelocity(0,0),e.getComponent(Ie).body.allowGravity=!1}};function dt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var vt=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=void 0,this.properties=void 0,this.shape=void 0,this.config=void 0,this.enabled=void 0,this.debugRect=void 0,this.type=t,this.config=n,this.properties=o,this.enabled=!0,this.shape=new Phaser.Geom.Rectangle(0,0,n.width,n.height),r&&i&&(this.debugRect=i.add.rectangle(this.shape.x,this.shape.y,this.shape.width,this.shape.height,255,.5),this.debugRect.fillColor=255,this.debugRect.setDepth(5))}var t,n,o;return t=e,(n=[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.shape.x=0,this.shape.y=0,this.shape.width=0,this.shape.height=0,this.debugRect&&(this.debugRect.x=this.shape.x,this.debugRect.y=this.shape.y,this.debugRect.width=this.shape.width,this.debugRect.height=this.shape.height)}},{key:"isEnabled",value:function(){return!0===this.enabled}},{key:"overlaps",value:function(e){return Phaser.Geom.Rectangle.Overlaps(this.shape,e.shape)}},{key:"setConfig",value:function(e){this.config=e}},{key:"syncToSprite",value:function(e){if(this.enabled){var t=e.scaleX,n=e.scaleY,o=(e.flipX?-1*this.config.offsetX:this.config.offsetX)*t,r=(e.flipY?-1*this.config.offsetY:this.config.offsetY)*n,i=t*this.config.width,a=n*this.config.height,s=e.getCenter(),c=new Phaser.Geom.Point(s.x+o,s.y+r);Phaser.Math.RotateAround(c,s.x,s.y,e.rotation),c.x-=i/2,c.y-=a/2,this.shape.x=c.x,this.shape.y=c.y,this.shape.width=i,this.shape.height=a}this.debugRect&&(this.debugRect.x=this.shape.x,this.debugRect.y=this.shape.y,this.debugRect.width=this.shape.width,this.debugRect.height=this.shape.height)}},{key:"destroy",value:function(){this.debugRect&&this.debugRect.destroy()}}])&&dt(t.prototype,n),o&&dt(t,o),e}();function mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var bt=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attachments=void 0,this.scene=void 0,this.data=void 0,this.scene=t,this.data=n,this.attachments=[]}var t,n,o;return t=e,(n=[{key:"createAttachment",value:function(e,t){var n=new vt(e,t,{},this.data.attachmentDebug,this.scene);return this.attachments.push(n),n}},{key:"getAttachmentsByType",value:function(e){return this.attachments.filter(function(t){return t.type===e})}},{key:"destroy",value:function(){this.attachments.forEach(function(e){return e.destroy()}),delete this.attachments,delete this.getAttachmentsByType,delete this.createAttachment}}])&&mt(t.prototype,n),o&&mt(t,o),e}();function gt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var wt=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hitboxFrames=void 0,this.enabled=void 0,this.entity=void 0,this.entity=o,this.hitboxFrames=t.cache.json.get(n.hitboxesKey).frames,this.enabled=!0;for(var r=this.hitboxFrames.map(function(e){return e.hitboxes.length}).reduce(function(e,t){return Math.max(e,t)},0),i=0;i<r;i++)o.getComponent(bt).createAttachment("hitbox",{offsetX:0,offsetY:0,width:0,height:0})}var t,n,o;return t=e,(n=[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.entity.getComponent(bt).getAttachmentsByType("hitbox").forEach(function(e){e.disable()})}},{key:"destroy",value:function(){delete this.hitboxFrames}}])&&gt(t.prototype,n),o&&gt(t,o),e}(),Ct=[pt,yt,{id:"arrow-disabled",transitions:[],onEnter:function(e){e.getComponent(a).sprite.active=!1,e.getComponent(a).sprite.visible=!1,e.getComponent(Ie).body.enable=!1,e.getComponent(Ie).body.allowGravity=!1,e.getComponent(wt).disable()},onLeave:function(e){e.getComponent(a).sprite.active=!0,e.getComponent(a).sprite.visible=!0,e.getComponent(Ie).body.enable=!0,e.getComponent(Ie).body.allowGravity=!0,e.getComponent(wt).enable()}}];function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function kt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entities=void 0,this.entities={}}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=this;new Set([].concat(kt(Object.keys(this.entities)),kt(e))).forEach(function(n){var o=t.entities[n];null!=o&&"inactive"!==o||!e.includes(n)?"entering"===o?t.entities[n]="active":"active"!==o||e.includes(n)?"exiting"===o&&(t.entities[n]="inactive"):t.entities[n]="exiting":t.entities[n]="entering"})}},{key:"getEntityIds",value:function(e){return Object.entries(this.entities).filter(function(t){var n=xt(t,2);n[0];return n[1]===e}).map(function(e){return xt(e,1)[0]})}},{key:"destroy",value:function(){this.entities={}}}])&&Pt(t.prototype,n),o&&Pt(t,o),e}();function St(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Et=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interactionCircle=void 0,this.interactionTracker=void 0,this.debugInteractionCircle=void 0;var o=new Phaser.Geom.Circle(n.x,n.y,n.interactionRadius);if(n.interactionDebug){var r=t.add.circle(n.x,n.y,n.interactionRadius,65280,.5);r.setOrigin(.5,.5),this.debugInteractionCircle=r}this.interactionTracker=new Ot,this.interactionCircle=o}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.debugInteractionCircle&&this.debugInteractionCircle.destroy(),this.interactionTracker.destroy(),delete this.interactionCircle,delete this.interactionTracker,delete this.debugInteractionCircle}}])&&St(t.prototype,n),o&&St(t,o),e}();function jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Tt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.scene=t}var t,n,o;return t=e,(n=[{key:"decreaseHealth",value:function(e){this.scene.persistence.adventurer.health-=e}},{key:"destroy",value:function(){}}])&&jt(t.prototype,n),o&&jt(t,o),e}(),_t={id:"enemy-idle",onEnter:function(e){e.getComponent(Ie).body.velocity.x=0,e.getComponent(a).sprite.anims.play("enemy-idle")},transitions:[{type:je.Timer,delay:function(){return Phaser.Math.RND.between(500,1500)},to:function(){return Phaser.Math.RND.pick(["enemy-wander","enemy-idle"])}},{type:je.Conditional,condition:function(e){var t=e.getComponent(Et).interactionTracker.getEntityIds("active"),n=e.getComponent(We).scene,o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value;if(n.phecs.phEntities.getEntityById(c).hasComponent(Tt))return!0}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return!1},to:"enemy-track-adventurer"}]};function At(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var It=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hurtboxFrames=void 0,this.enabled=void 0,this.entity=void 0,this.entity=o,this.hurtboxFrames=t.cache.json.get(n.hurtboxesKey).frames,this.enabled=!0;for(var r=this.hurtboxFrames.map(function(e){return e.hurtboxes.length}).reduce(function(e,t){return Math.max(e,t)},0),i=0;i<r;i++)o.getComponent(bt).createAttachment("hurtbox",{offsetX:0,offsetY:0,width:0,height:0})}var t,n,o;return t=e,(n=[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.entity.getComponent(bt).getAttachmentsByType("hurtbox").forEach(function(e){e.disable()})}},{key:"destroy",value:function(){delete this.hurtboxFrames}}])&&At(t.prototype,n),o&&At(t,o),e}(),Mt={id:"enemy-dead",onEnter:function(e){var t=e.getComponent(a).sprite;t.anims.stop(),e.getComponent(Ie).body.enable=!1,e.getComponent(It).disable(),e.getComponent(We).scene.tweens.add({targets:[t],props:{alpha:0},duration:100,yoyo:!0,repeat:1,onComplete:function(){t.active=!1,t.visible=!1}})},transitions:[]},Rt={id:"enemy-stun",onEnter:function(e){var t=e.getComponent(a).sprite,n=e.getComponent(Ie).body;t.anims.stop(),n.allowGravity=!1,n.velocity.x=0,n.velocity.y=0,e.getComponent(We).scene.tweens.timeline({tweens:[{targets:t,props:{alpha:.5},duration:100,completeDelay:300},{targets:t,props:{alpha:1},duration:100}]})},onLeave:function(e){e.getComponent(Ie).body.allowGravity=!0},transitions:[{type:je.Conditional,condition:function(e){var t=e.getComponent(a).sprite;return!e.getComponent(We).scene.tweens.isTweening(t)},to:function(e){return e.getComponent(Ie).body.blocked.down?"enemy-idle":"enemy-fall"}}]},Lt=-350,Dt=60,Bt=30,Nt={id:"enemy-jump",onEnter:function(e){e.getComponent(a).sprite.anims.play("enemy-jump"),e.getComponent(Ie).body.velocity.y=Lt},transitions:[{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.velocity.y<=0},to:"enemy-fall"}]},Ht={id:"enemy-track-adventurer",onEnter:function(e){e.getComponent(a).sprite.anims.play("enemy-jump")},onUpdate:function(e){var t=e.getComponent(We).scene.phecs.phEntities.getEntities(Tt)[0].getComponent(a).sprite,n=e.getComponent(a).sprite,o=e.getComponent(Ie).body;n.x<t.x?(o.velocity.x=Dt,n.flipX=!1):n.x>t.x&&(o.velocity.x=-Dt,n.flipX=!0)},transitions:[{type:je.Timer,delay:1e3,to:"enemy-jump-prep"},{type:je.Conditional,condition:function(e){var t=e.getComponent(We).scene,n=e.getComponent(Et).interactionTracker.getEntityIds("active"),o=t.phecs.phEntities.getEntities(Tt)[0].id;return!n.includes(o)},to:"enemy-idle"}]},Ft={id:"enemy-fall",onEnter:function(e){e.getComponent(a).sprite.anims.play("enemy-jump")},transitions:[{type:je.Conditional,condition:function(e){return e.getComponent(Ie).body.blocked.down},to:"enemy-idle"}]};function Kt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var zt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zone=void 0;var o=t.areaManager.getZone(n.zoneBoundaryName);if(null==o)throw new Error("ZoneBoundaryComponent::ZONE_NOT_FOUND");this.zone=new Phaser.Geom.Rectangle(o.x,o.y,o.width,o.height)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){delete this.zone}}])&&Kt(t.prototype,n),o&&Kt(t,o),e}(),Xt={id:"enemy-wander",onEnter:function(e){var t=e.getComponent(a).sprite,n=e.getComponent(Ie).body;n.velocity.x=Phaser.Math.RND.pick([-1,1])*Bt,n.velocity.x<0?t.flipX=!0:t.flipX=!1},onUpdate:function(e){var t=e.getComponent(a).sprite,n=e.getComponent(Ie).body,o=e.getComponent(zt).zone;Phaser.Geom.Rectangle.ContainsRect(o,t.getBounds())||(n.velocity.x*=-1)},transitions:[{type:je.Timer,delay:function(){return Phaser.Math.RND.between(500,1500)},to:function(e){return Phaser.Math.RND.pick(["enemy-wander","enemy-idle"])}},{type:je.Conditional,condition:function(e){var t=e.getComponent(Et).interactionTracker.getEntityIds("active"),n=e.getComponent(We).scene,o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value;if(n.phecs.phEntities.getEntityById(c).hasComponent(Tt))return!0}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return!1},to:"enemy-track-adventurer"}]},Gt=[_t,Rt,Mt,{id:"enemy-jump-prep",onEnter:function(e){var t=e.getComponent(a).sprite,n=e.getComponent(We).scene;t.anims.stop(),n.tweens.timeline({tweens:[{targets:t,props:{scaleY:.8,scaleX:1.2},duration:100,completeDelay:100},{targets:t,props:{scaleY:1,scaleX:1},duration:100}]})},transitions:[{type:je.Timer,delay:300,to:"enemy-jump"}]},Nt,Ft,Ht,Xt],Ut=[{id:"old-lady-idle",onEnter:function(e){e.getComponent(a).sprite.anims.play("old-lady-idle")},transitions:[]}],Vt=[{id:"old-man-idle",onEnter:function(e){e.getComponent(a).sprite.anims.play("old-man-idle")},transitions:[]}],Yt=[{id:"sheep-walk-left",onEnter:function(e){e.getComponent(a).sprite.anims.play("sheep-walk"),e.getComponent(a).sprite.flipX=!0,e.getComponent(Ie).body.velocity.x=-50},transitions:[{type:je.Conditional,condition:function(e){var t=e.getComponent(a).sprite,n=e.getComponent(zt).zone;return t.x<n.x},to:"sheep-walk-right"}]},{id:"sheep-walk-right",onEnter:function(e){e.getComponent(a).sprite.anims.play("sheep-walk"),e.getComponent(a).sprite.flipX=!1,e.getComponent(Ie).body.velocity.x=50},transitions:[{type:je.Conditional,condition:function(e){var t=e.getComponent(a).sprite,n=e.getComponent(zt).zone;return t.x+t.width>n.x+n.width},to:"sheep-walk-left"}]}];function Wt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Jt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxHealth=void 0,this.currentHealth=void 0,this.onDeathListeners=void 0,this.onDamageListeners=void 0,this.maxHealth=n.maxHealth,this.currentHealth=this.maxHealth,this.onDeathListeners=[],this.onDamageListeners=[]}var t,n,o;return t=e,(n=[{key:"decreaseHealth",value:function(e){var t=this;this.currentHealth-=e,this.currentHealth<=0?this.onDeathListeners.forEach(function(e){return e()}):this.onDamageListeners.forEach(function(e){return e(t.currentHealth)})}},{key:"onDamage",value:function(e){this.onDamageListeners.push(e)}},{key:"onDeath",value:function(e){this.onDeathListeners.push(e)}},{key:"destroy",value:function(){delete this.maxHealth,delete this.currentHealth,delete this.onDeathListeners,delete this.onDamageListeners}}])&&Wt(t.prototype,n),o&&Wt(t,o),e}();function Zt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var qt=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entities1Config=void 0,this.entities2Config=void 0,this.onHit=void 0,this.entities1Config=t,this.entities2Config=n,this.onHit=o}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=this.entities1Config.entityFetcher(e),n=this.entities2Config.entityFetcher(e),o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value,u=c.getComponent(bt).getAttachmentsByType(this.entities1Config.boxType).filter(function(e){return e.isEnabled()}),l=!0,f=!1,h=void 0;try{for(var p,y=n[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var d=p.value,v=d.getComponent(bt).getAttachmentsByType(this.entities2Config.boxType).filter(function(e){return e.isEnabled()});this.doBoxesOverlap(u,v)&&this.onHit(c,d)}}catch(e){f=!0,h=e}finally{try{l||null==y.return||y.return()}finally{if(f)throw h}}}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"doBoxesOverlap",value:function(e,t){var n=!1,o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value;if(n)break;var u=!0,l=!1,f=void 0;try{for(var h,p=t[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var y=h.value;if(n)break;n=c.overlaps(y)}}catch(e){l=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw f}}}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}}])&&Zt(t.prototype,n),o&&Zt(t,o),e}();function Qt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var $t=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=o.getComponent(Jt),i=o.getComponent(Ke).phiniteStateMachine;r.onDamage(function(){i.doTransition({to:"enemy-stun"})}),r.onDeath(function(){i.doTransition({to:"enemy-dead"})})}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){}}])&&Qt(t.prototype,n),o&&Qt(t,o),e}();function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rn=1,an=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tn(this,nn(t).call(this,{entityFetcher:function(e){return e.getEntities("arrow").filter(function(e){return"arrow-flying"===e.getComponent(Ke).phiniteStateMachine.currentState.id})},boxType:"hitbox"},{entityFetcher:function(e){return e.getEntities($t)},boxType:"hurtbox"},function(e,t){e.getComponent(Ke).phiniteStateMachine.doTransition({to:"arrow-disabled"}),t.getComponent(Jt).decreaseHealth(rn)}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,qt),t}(),sn={preload:"preload",title:"title",exploration:"exploration",hud:"hud",death:"death",newGame:"newGame",continueGame:"continueGame",prefabTest:"prefabTest"};function cn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var un=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.healthListenerCleanupFn=void 0,this.scene=t}var t,n,o;return t=e,(n=[{key:"start",value:function(e){var t=this;this.healthListenerCleanupFn=this.scene.persistence.adventurer.onChange("health",function(e){e<=0&&(t.scene.scene.stop(sn.hud),t.scene.scene.pause(sn.exploration),t.scene.scene.launch(sn.death))})}},{key:"stop",value:function(){this.healthListenerCleanupFn&&this.healthListenerCleanupFn(),delete this.healthListenerCleanupFn}}])&&cn(t.prototype,n),o&&cn(t,o),e}();function ln(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var fn,hn,pn,yn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.identifierA=void 0,this.identifierB=void 0,this.listeners=void 0,this.scene=t,this.identifierA=n,this.identifierB=o,this.listeners=[]}var t,n,o;return t=e,(n=[{key:"start",value:function(e){var t=this,n=e.getEntities(this.identifierA),o=e.getEntities(this.identifierB),r=this.scene.controls.action,i=!0,a=!1,s=void 0;try{for(var c,u=function(){var e=c.value,n=!0,i=!1,a=void 0;try{for(var s,u=function(){var n=s.value,o=function(){e.getComponent(Et).interactionTracker.getEntityIds("active").includes(n.id)&&t.onInteraction&&t.onInteraction(n)},i=r.onPress(o);t.listeners.push({control:"action",listener:o,listenerCancelFn:i})},l=o[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)u()}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}},l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)u()}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}}},{key:"stop",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=this.listeners[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.listenerCancelFn()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"update",value:function(e){var t=e.getEntities(this.identifierA),n=e.getEntities(this.identifierB),o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value.getComponent(Et).interactionTracker,u=this.getInteractingEntityBs(c,n,"entering"),l=!0,f=!1,h=void 0;try{for(var p,y=u[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var d=p.value;this.onEnter&&this.onEnter(d)}}catch(e){f=!0,h=e}finally{try{l||null==y.return||y.return()}finally{if(f)throw h}}var v=this.getInteractingEntityBs(c,n,"exiting"),m=!0,b=!1,g=void 0;try{for(var w,C=v[Symbol.iterator]();!(m=(w=C.next()).done);m=!0){var x=w.value;this.onExit&&this.onExit(x)}}catch(e){b=!0,g=e}finally{try{m||null==C.return||C.return()}finally{if(b)throw g}}}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"destroy",value:function(){this.listeners=[]}},{key:"getInteractingEntityBs",value:function(e,t,n){var o=e.getEntityIds(n);return t.filter(function(e){return o.includes(e.id)})}}])&&ln(t.prototype,n),o&&ln(t,o),e}();function dn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.TOP="top",e.LEFT="left"}(pn||(pn={}));var mn=10,bn=(vn(fn={},pn.TOP,"indicator-down"),vn(fn,pn.LEFT,"indicator-right"),fn),gn=(vn(hn={},pn.TOP,"indicator-down"),vn(hn,pn.LEFT,"indicator-right"),hn),wn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sprite=void 0,this.side=void 0;var r=n.x,i=n.y;this.side=o,this.sprite=t.add.sprite(r,i,bn[o]),this.sprite.setDepth(n.depth),o===pn.TOP?(this.sprite.setOrigin(.5,1),this.sprite.y=i-n.height*n.scaleY/2-mn):o===pn.LEFT&&(this.sprite.setOrigin(1,.5),this.sprite.x=r-n.width*n.scaleX/2-mn)}var t,n,o;return t=e,(n=[{key:"show",value:function(){this.sprite.visible=!0,this.sprite.active=!0,this.sprite.anims.play(gn[this.side])}},{key:"hide",value:function(){this.sprite.visible=!1,this.sprite.active=!1,this.sprite.anims.stop()}},{key:"destroy",value:function(){this.sprite.destroy()}}])&&dn(t.prototype,n),o&&dn(t,o),e}();function Cn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var xn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indicator=void 0;var r=n.indicatorSide||pn.TOP,i=o.getComponent(a).sprite;this.indicator=new wn(t,i,r),this.indicator.hide()}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.indicator.destroy()}}])&&Cn(t.prototype,n),o&&Cn(t,o),e}();function kn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Pn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.toAreaKey=void 0,this.toMarker=void 0,this.toAreaKey=n.toAreaKey,this.toMarker=n.toMarker}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){delete this.toAreaKey,delete this.toMarker}}])&&kn(t.prototype,n),o&&kn(t,o),e}();function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function En(e,t){return!t||"object"!==On(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _n=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=En(this,jn(t).call(this,e,Tt,Pn))).explorationScene=void 0,n.explorationScene=e,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,yn),n=t,(o=[{key:"onEnter",value:function(e){e.getComponent(xn).indicator.show()}},{key:"onInteraction",value:function(e){var t=e.getComponent(Pn);this.explorationScene.loadNewArea(t.toAreaKey,t.toMarker)}},{key:"onExit",value:function(e){e.getComponent(xn).indicator.hide()}}])&&Sn(n.prototype,o),r&&Sn(n,r),t}();function An(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var In=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.conversation=void 0,this.entityY=void 0,this.conversationBoxSprite=void 0,this.conversationProgressIndex=void 0,this.conversationKey=void 0,this.scene=t,this.conversationKey=n.conversationKey,this.conversation=[];var r=o.getComponent(a).sprite;this.entityY=r.y,this.conversationProgressIndex=0,this.conversationBoxSprite=t.add.ninePatch(r.x,r.y,0,0,"conversation-box",null,{top:6,left:15,right:15,bottom:12}),this.conversationBoxSprite.alpha=0}var t,n,o;return t=e,(n=[{key:"startConversation",value:function(){this.loadConversation(),this.conversationBoxSprite.alpha=1,this.conversationProgressIndex=0,this.updateConversationText()}},{key:"continueConversation",value:function(){this.hasMoreConversation()?this.conversationProgressIndex+=1:this.stopConversation(),this.updateConversationText()}},{key:"stopConversation",value:function(){this.conversationBoxSprite.alpha=0}},{key:"hasMoreConversation",value:function(){return this.conversationProgressIndex<this.conversation.length-1}},{key:"destroy",value:function(){this.conversationBoxSprite.destroy()}},{key:"loadConversation",value:function(){var e=this.scene.persistence.progression.conversations.getCurrentConversationId(this.conversationKey);this.conversation=this.scene.cache.json.get("conversations")[e]}},{key:"updateConversationText",value:function(){var e=this.scene.add.bitmapText(0,0,"compass-24-conversation",this.conversation[this.conversationProgressIndex]);e.setMaxWidth(300),e.setOrigin(.5);var t=e.getTextBounds().local;if(this.conversationBoxSprite.resize(t.width+50,t.height+50),this.conversationBoxSprite.add(e),this.hasMoreConversation()){var n=this.scene.add.sprite(this.conversationBoxSprite.width/2-5,-this.conversationBoxSprite.height/2-2,"indicator-right");n.setOrigin(1,0),n.anims.play("indicator-right"),this.conversationBoxSprite.add(n)}this.conversationBoxSprite.y=this.entityY-this.conversationBoxSprite.height/2-40}}])&&An(t.prototype,n),o&&An(t,o),e}();function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ln(e,t){return!t||"object"!==Mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ln(this,Dn(t).call(this,e,Tt,"npc"))).interacting=void 0,n.interacting=!1,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,yn),n=t,(o=[{key:"onEnter",value:function(e){e.getComponent(xn).indicator.show()}},{key:"onInteraction",value:function(e){var t=e.getComponent(In);this.interacting?this.interacting&&t.hasMoreConversation()?t.continueConversation():(this.interacting=!1,t.stopConversation(),this.scene.persistence.progression.conversations.markCurrentConversationComplete(t.conversationKey),this.scene.persistence.save()):(this.interacting=!0,e.getComponent(xn).indicator.hide(),t.startConversation())}},{key:"onExit",value:function(e){if(this.interacting){var t=e.getComponent(In);t.hasMoreConversation()||(this.scene.persistence.progression.conversations.markCurrentConversationComplete(t.conversationKey),this.scene.persistence.save()),t.stopConversation(),this.interacting=!1}e.getComponent(xn).indicator.hide()}}])&&Rn(n.prototype,o),r&&Rn(n,r),t}();function Hn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Fn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isTextboxShowing=void 0,this.signs=void 0,this.textboxSprite=void 0,this.textboxShowTween=void 0,this.textboxHideTween=void 0,this.signs=t.cache.json.get("signs"),this.isTextboxShowing=!1;var o=t.cameras.main.width/2;this.textboxSprite=t.add.ninePatch(o,-100,400,100,"textbox",null,{top:10,bottom:10,left:10,right:10}),this.textboxSprite.setDepth(10).setScrollFactor(0);var r=t.add.bitmapText(0,0,"compass-24",this.signs[n.signId].message);r.setOrigin(.5),this.textboxSprite.add(r),this.textboxShowTween=t.tweens.add({targets:this.textboxSprite,y:75,duration:300,ease:Phaser.Math.Easing.Quadratic.Out}).pause(),this.textboxHideTween=t.tweens.add({targets:[this.textboxSprite],y:-100,duration:300,ease:Phaser.Math.Easing.Quadratic.In}).pause()}var t,n,o;return t=e,(n=[{key:"showTextbox",value:function(){this.isTextboxShowing=!0,this.textboxHideTween.pause(),this.textboxShowTween.restart()}},{key:"hideTextbox",value:function(){this.isTextboxShowing=!1,this.textboxShowTween.pause(),this.textboxHideTween.restart()}},{key:"destroy",value:function(){this.textboxShowTween.remove(),this.textboxHideTween.remove(),this.textboxSprite.destroy(),delete this.textboxShowTween,delete this.textboxHideTween,delete this.textboxSprite}}])&&Hn(t.prototype,n),o&&Hn(t,o),e}();function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xn(e,t){return!t||"object"!==Kn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xn(this,Gn(t).call(this,e,Tt,"sign"))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,yn),n=t,(o=[{key:"onEnter",value:function(e){e.getComponent(xn).indicator.show()}},{key:"onInteraction",value:function(e){e.getComponent(Fn).isTextboxShowing?e.getComponent(Fn).hideTextbox():e.getComponent(Fn).showTextbox()}},{key:"onExit",value:function(e){e.getComponent(xn).indicator.hide(),e.getComponent(Fn).isTextboxShowing&&e.getComponent(Fn).hideTextbox()}}])&&zn(n.prototype,o),r&&zn(n,r),t}();function Yn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Wn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isInvulnerable=void 0,this.scene=void 0,this.sprite=void 0,this.scene=t,this.isInvulnerable=!1,this.sprite=o.getComponent(a).sprite}var t,n,o;return t=e,(n=[{key:"makeInvulnerable",value:function(){var e=this;this.isInvulnerable=!0,this.sprite.alpha=.5;var t=this.scene.time.delayedCall(500,function(){e.sprite.alpha=1,e.isInvulnerable=!1,t.destroy()})}},{key:"destroy",value:function(){delete this.isInvulnerable}}])&&Yn(t.prototype,n),o&&Yn(t,o),e}();function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $n=1,eo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zn(this,qn(t).call(this,{entityFetcher:function(e){return e.getEntities(Tt).filter(function(e){return!e.getComponent(Wn).isInvulnerable})},boxType:"hurtbox"},{entityFetcher:function(e){return e.getEntities($t)},boxType:"hurtbox"},function(e,t){e.getComponent(Wn).makeInvulnerable(),e.getComponent(Tt).decreaseHealth($n)}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(t,qt),t}();function to(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var no=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=e.getEntities(bt),n=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value,u=!0,l=!1,f=void 0;try{for(var h,p=c.getComponent(bt).attachments[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){h.value.syncToSprite(c.getComponent(a).sprite)}}catch(e){l=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw f}}}}catch(e){o=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}}}])&&to(t.prototype,n),o&&to(t,o),e}();function oo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ro=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.boundsFrames=void 0,this.boundsFrames=t.cache.json.get(n.boundsKey)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){delete this.boundsFrames}}])&&oo(t.prototype,n),o&&oo(t,o),e}();function io(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ao=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){e.getEntities(ro).forEach(function(e){var t=e.getComponent(a).sprite.frame.texture.key,n=e.getComponent(a).sprite.frame.name,o=e.getComponent(ro).boundsFrames.find(function(e){return e.key===t&&e.frame===n});if(o){var r=o.bounds,i={x:r.offset.x,y:r.offset.y};e.getComponent(a).sprite.flipX&&(i.x=e.getComponent(a).sprite.width-r.offset.x-r.size.width),e.getComponent(a).sprite.flipY&&(i.y=e.getComponent(a).sprite.height-r.offset.y-r.size.height);var s={x:e.getComponent(a).sprite.displayWidth*e.getComponent(a).sprite.originX/e.getComponent(a).sprite.scale,y:e.getComponent(a).sprite.displayHeight*e.getComponent(a).sprite.originY/e.getComponent(a).sprite.scale};Phaser.Math.RotateAround(i,s.x,s.y,e.getComponent(a).sprite.rotation),e.getComponent(Ie).body.setSize(r.size.width,r.size.height),e.getComponent(Ie).body.setOffset(i.x,i.y)}else e.getComponent(Ie).body.setSize(e.getComponent(a).sprite.width,e.getComponent(a).sprite.height),e.getComponent(Ie).body.setOffset(0,0);e.getComponent(Ie).body.updateBounds()})}}])&&io(t.prototype,n),o&&io(t,o),e}();function so(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var co=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){e.getEntities(wt).filter(function(e){return e.getComponent(wt).enabled}).forEach(function(e){var t=e.getComponent(a).sprite.frame.texture.key,n=e.getComponent(a).sprite.frame.name,o=e.getComponent(wt).hitboxFrames.find(function(e){return e.key===t&&e.frame===n});if(o&&o.hitboxes)for(var r=e.getComponent(bt).getAttachmentsByType("hitbox"),i=0;i<r.length;i++){var s=o.hitboxes[i],c=r[i];s?(c.enable(),c.setConfig({offsetX:s.x,offsetY:s.y,width:s.width,height:s.height})):c.disable()}})}}])&&so(t.prototype,n),o&&so(t,o),e}();function uo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var lo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){e.getEntities(It).filter(function(e){return e.getComponent(It).enabled}).forEach(function(e){var t=e.getComponent(a).sprite.frame.texture.key,n=e.getComponent(a).sprite.frame.name,o=e.getComponent(It).hurtboxFrames.find(function(e){return e.key===t&&e.frame===n});if(o&&o.hurtboxes)for(var r=e.getComponent(bt).getAttachmentsByType("hurtbox"),i=0;i<r.length;i++){var s=o.hurtboxes[i],c=r[i];s?(c.enable(),c.setConfig({offsetX:s.x,offsetY:s.y,width:s.width,height:s.height})):c.disable()}})}}])&&uo(t.prototype,n),o&&uo(t,o),e}();function fo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ho=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.scene=t}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=e.getEntities(Et),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;this.syncInteractionCircleToEntity(s),this.syncDebugCircle(s)}}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}var c=!0,u=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var p=f.value,y=this.getIntersectingInteractionIds(p,t);p.getComponent(Et).interactionTracker.update(y)}}catch(e){u=!0,l=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw l}}}},{key:"syncInteractionCircleToEntity",value:function(e){var t=e.getComponent(a).sprite;e.getComponent(Et).interactionCircle.setPosition(t.x,t.y)}},{key:"getIntersectingInteractionIds",value:function(e,t){return t.filter(function(t){return t.id!==e.id}).filter(function(t){var n=e.getComponent(Et).interactionCircle,o=t.getComponent(Et).interactionCircle;return Phaser.Geom.Intersects.CircleToCircle(n,o)}).map(function(e){return e.id})}},{key:"syncDebugCircle",value:function(e){var t=e.getComponent(Et).debugInteractionCircle;if(t){var n=e.getComponent(a).sprite,o=this.scene.input.activePointer.positionToCamera(this.scene.cameras.main);t.setPosition(n.x,n.y),Phaser.Geom.Intersects.CircleToCircle(e.getComponent(Et).interactionCircle,new Phaser.Geom.Circle(o.x,o.y,1))?t.setFillStyle(16711680,.5):t.setFillStyle(65280,.5)}}}])&&fo(t.prototype,n),o&&fo(t,o),e}();function po(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var yo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){e.getEntities(Ke).forEach(function(e){e.getComponent(Ke).phiniteStateMachine.update()})}}])&&po(t.prototype,n),o&&po(t,o),e}(),vo={components:[{component:a,data:{texture:"adventurer-core",frame:0}},{component:Ie,data:{maxVelocityX:350}},Tt,{component:bt,data:{attachmentDebug:!1}},{component:It,data:{hurtboxesKey:"adventurer-hurtboxes"}},{component:ro,data:{boundsKey:"adventurer-bounds"}},{component:Et,data:{interactionRadius:30,interactionDebug:!1}},{component:Ke,data:{stateSet:"adventurer",initialStateId:"adventurer-stand"}},{component:Ge},Wn,We]},mo={components:[{component:a,data:{texture:"arrow",frame:0}},Ie,{component:bt,data:{attachmentDebug:!1}},{component:wt,data:{hitboxesKey:"arrow-hitboxes"}},{component:Ke,data:{stateSet:"arrow",initialStateId:"arrow-disabled"}},{component:ro,data:{boundsKey:"arrow-bounds"}}]},bo={components:[{component:a,data:{texture:"doors",frame:1,depth:2}},Pn,xn,{component:Et,data:{interactionRadius:40}}]},go={components:[{component:a,data:{texture:"enemy",frame:0}},Ie,{component:bt,data:{attachmentDebug:!1}},{component:Ke,data:{stateSet:"enemy",initialStateId:"enemy-idle"}},{component:It,data:{hurtboxesKey:"enemy-hurtboxes"}},{component:wt,data:{hitboxesKey:"enemy-hitboxes"}},{component:Jt,data:{maxHealth:2}},{component:Et,data:{interactionRadius:220,interactionDebug:!1}},$t,{component:zt,data:{zoneBoundaryName:"enemyBounds"}},{component:We}]};function wo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Co={components:[a,Ke,{component:Et,data:{interactionRadius:70,interactionDebug:!1}},xn,In,function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.npcId=void 0,this.npcId=n.npcId}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){delete this.npcId}}])&&wo(t.prototype,n),o&&wo(t,o),e}()]},xo={components:[{component:a,data:{texture:"sheep-walk",frame:0,depth:0}},Ie,{component:Ke,data:{stateSet:"sheep",initialStateId:"sheep-walk-right"}},{component:zt,data:{zoneBoundaryName:"sheepBounds"}}]},ko={components:[{component:a,data:{texture:"core-tileset-spritesheet",frame:1128}},{component:Et,data:{interactionRadius:30,interactionDebug:!1}},xn,Fn]};function Po(e){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function So(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Eo(e,t){return!t||"object"!==Po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _o=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Eo(this,jo(t).call(this,{key:sn.exploration}))).isLoadingArea=void 0,e.isLoadingArea=!1,e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(t,Te),n=t,(o=[{key:"init",value:function(){var e=this;this.events.once(Phaser.Scenes.Events.SHUTDOWN,function(){return e.shutdown()})}},{key:"create",value:function(e){var t=this;this.registerStateSets(),this.registerAreas(),this.registerBackgroundSets(),this.registerSystems(),this.registerPrefabs(),this.cameras.main.fadeOut(0),this.loadNewArea(e.areaKey,e.markerName).then(function(){t.cameras.main.fadeIn(1e3),t.scene.launch(sn.hud)})}},{key:"registerStateSets",value:function(){this.stateRegistrar.registerSets([{id:"adventurer",states:ht},{id:"arrow",states:Ct},{id:"enemy",states:Gt},{id:"sheep",states:Yt},{id:"old-lady",states:Ut},{id:"old-man",states:Vt}])}},{key:"registerAreas",value:function(){this.areaManager.registerArea("woollards-farm","woollards-farm","core-tileset","core-tileset"),this.areaManager.registerArea("woollards-house","woollards-house","core-tileset","core-tileset")}},{key:"registerBackgroundSets",value:function(){this.areaManager.registerBackgroundSet("green-hills",["green-hills-1","green-hills-2","green-hills-3","green-hills-4"])}},{key:"registerSystems",value:function(){this.phecs.phSystems.registerSystems([an,un,_n,Nn,Vn,eo,no,ao,co,lo,ho,yo])}},{key:"registerPrefabs",value:function(){this.phecs.phEntities.registerPrefab("adventurer",vo),this.phecs.phEntities.registerPrefab("arrow",mo),this.phecs.phEntities.registerPrefab("door",bo),this.phecs.phEntities.registerPrefab("enemy",go),this.phecs.phEntities.registerPrefab("npc",Co),this.phecs.phEntities.registerPrefab("sheep",xo),this.phecs.phEntities.registerPrefab("sign",ko)}},{key:"loadNewArea",value:function(e,t){var n=this;return new Promise(function(o,i){n.isLoadingArea?i():(n.isLoadingArea=!0,n.time.delayedCall(0,function(){n.controls.stop(),n.phecs.reset(),n.areaManager.unload(),n.areaManager.load(e);var i=n.areaManager.map,s=n.areaManager.tileset,c=n.phecs.phEntities.createPrefab("adventurer",{},2),u=r(i.properties);t?n.areaManager.placeEntityAtMarker(c,t):u.startingMarker&&n.areaManager.placeEntityAtMarker(c,u.startingMarker),u.entityLayerCollisions&&u.entityLayerCollisions.split(",").forEach(function(e){var t=Oo(e.split(":"),2),o=t[0],r=t[1],i=n.phecs.phEntities.getEntities(o),s=n.areaManager.getTileLayer(r);if(null==s)throw new Error("Layer does not exist for collision pair: ".concat(e));var c=!0,u=!1,l=void 0;try{for(var f,h=i[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var p=f.value.getComponent(a).sprite;n.physics.add.collider(p,s)}}catch(e){u=!0,l=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw l}}}),n.controls.start(),n.phecs.start();var l=n.calculateCameraBounds(i,s),f=l.x,h=l.y,p=l.width,y=l.height;n.cameras.main.setBounds(f,h,p,y),n.cameras.main.startFollow(c.getComponent(a).sprite,!0),n.persistence.location.areaKey=e,t&&(n.persistence.location.markerName=t),n.persistence.save(),n.isLoadingArea=!1,o()},[],null))})}},{key:"shutdown",value:function(){this.phecs.shutdown(),this.areaManager.unload()}},{key:"calculateCameraBounds",value:function(e,t){var n=0,o=0,r=e.width*t.tileWidth,i=e.height*t.tileHeight;return r<800&&(n-=(800-r)/2),i<450&&(o-=(450-i)/2),{x:n,y:o,width:r,height:i}}}])&&So(n.prototype,o),i&&So(n,i),t}();function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mo(e,t){return!t||"object"!==Ao(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ro(e){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Do=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mo(this,Ro(t).call(this,{key:sn.death}))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(t,Te),n=t,(o=[{key:"create",value:function(){var e=this;this.add.bitmapText(this.cameras.main.centerX,this.cameras.main.centerY-24,"compass-72","You died").setOrigin(.5),this.add.bitmapText(this.cameras.main.centerX,this.cameras.main.centerY+32,"compass-24","Try again?").setOrigin(.5),this.input.keyboard.once(Phaser.Input.Keyboard.Events.ANY_KEY_DOWN,function(){e.cameras.main.fadeOut(1e3,0,0,0,function(t,n){1===n&&(e.scene.stop(sn.exploration),e.scene.stop(sn.hud),e.scene.stop(sn.death),e.scene.start(sn.continueGame))})})}}])&&Io(n.prototype,o),r&&Io(n,r),t}();function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ho(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zo=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ho(this,Fo(t).call(this,{key:sn.prefabTest}))).centerDebugCircle=void 0,e.enemy=void 0,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(t,Te),n=t,(o=[{key:"create",value:function(){this.phecs.phEntities.registerPrefab("arrow",mo),this.phecs.phSystems.registerSystems([no,ho,ao,lo,co]),this.stateRegistrar.registerSets([{id:"arrow",states:Ct}]);var e=0,t=this.add.text(200,50,"Frame ".concat(e)),n=this.phecs.phEntities.createPrefab("arrow",{},5,0,0);n.getComponent(a).sprite.x=150,n.getComponent(a).sprite.y=200,n.getComponent(a).sprite.setFrame(e),n.getComponent(Ie).body.allowGravity=!1,n.getComponent(a).sprite.anims.stop(),this.centerDebugCircle=this.add.circle(0,0,10,65280),this.centerDebugCircle.setDepth(100),this.input.keyboard.on("keydown",function(o){switch(o.key){case"ArrowUp":e++;break;case"ArrowDown":e--}n.getComponent(a).sprite.setFrame(e),t.setText("Frame ".concat(e))}),console.log(n),this.input.keyboard.on(Phaser.Input.Keyboard.Events.ANY_KEY_DOWN,function(e){"ArrowLeft"===e.key?n.getComponent(Ie).body.acceleration.x=-600:"ArrowRight"===e.key?n.getComponent(Ie).body.acceleration.x=600:" "===e.key&&(n.getComponent(Ie).body.acceleration.x=0,n.getComponent(Ie).body.velocity.x=0)}),this.phecs.start(),this.cameras.main.setBackgroundColor("#cccccc"),this.enemy=n,this.events.on(Phaser.Scenes.Events.POST_UPDATE,this.myUpdate,this)}},{key:"myUpdate",value:function(){var e=this.enemy.getComponent(a).sprite.getCenter();this.centerDebugCircle.setPosition(e.x,e.y)}}])&&No(n.prototype,o),r&&No(n,r),t}();function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Uo(e,t){return!t||"object"!==Xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Uo(this,Vo(t).call(this,{key:sn.preload}))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,Te),n=t,(o=[{key:"preload",value:function(){this.load.image("title-screen","assets/backgrounds/title-screen.png"),this.load.image("vignette-effect","assets/backgrounds/vignette-effect.png"),this.load.image("green-hills-1","assets/backgrounds/green-hills/1.png"),this.load.image("green-hills-2","assets/backgrounds/green-hills/2.png"),this.load.image("green-hills-3","assets/backgrounds/green-hills/3.png"),this.load.image("green-hills-4","assets/backgrounds/green-hills/4.png"),this.load.bitmapFont("compass-72","assets/fonts/compass-72.png","assets/fonts/compass-72.xml"),this.load.bitmapFont("compass-72-title","assets/fonts/compass-72-title.png","assets/fonts/compass-72-title.xml"),this.load.bitmapFont("compass-24","assets/fonts/compass-24.png","assets/fonts/compass-24.xml"),this.load.bitmapFont("compass-24-conversation","assets/fonts/compass-24-conversation.png","assets/fonts/compass-24-conversation.xml"),this.load.bitmapFont("compass-18","assets/fonts/compass-18.png","assets/fonts/compass-18.xml"),this.load.spritesheet("old-lady","assets/sprites/npcs/old-lady.png",{frameWidth:41,frameHeight:66}),this.load.animation("old-lady-animations","assets/animations/old-lady.json"),this.load.spritesheet("old-man","assets/sprites/npcs/old-man.png",{frameWidth:47,frameHeight:66}),this.load.animation("old-man-animations","assets/animations/old-man.json"),this.load.spritesheet("adventurer-core","assets/sprites/adventurer/adventurer-core.png",{frameWidth:100,frameHeight:74}),this.load.spritesheet("adventurer-bow","assets/sprites/adventurer/adventurer-bow.png",{frameWidth:100,frameHeight:74}),this.load.animation("adventurer-animations","assets/animations/adventurer.json"),this.load.json("adventurer-hurtboxes","assets/hurtboxes/adventurer.json"),this.load.json("adventurer-bounds","assets/bounds/adventurer.json"),this.load.image("arrow","assets/sprites/projectiles/arrow.png"),this.load.json("arrow-bounds","assets/bounds/arrow.json"),this.load.json("arrow-hitboxes","assets/hitboxes/arrow.json"),this.load.spritesheet("sheep-walk","assets/sprites/sheep/sheep-walk.png",{frameWidth:40,frameHeight:34}),this.load.animation("sheep-animations","assets/animations/sheep.json"),this.load.spritesheet("enemy","assets/sprites/enemy/enemy.png",{frameWidth:32,frameHeight:32}),this.load.animation("enemy-animations","assets/animations/enemy.json"),this.load.json("enemy-hurtboxes","assets/hurtboxes/enemy.json"),this.load.json("enemy-hitboxes","assets/hitboxes/enemy.json"),this.load.spritesheet("indicator-down","assets/sprites/indicators/indicator-down.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("indicator-right","assets/sprites/indicators/indicator-right.png",{frameWidth:32,frameHeight:32}),this.load.animation("indicator-animations","assets/animations/indicators.json"),this.load.spritesheet("doors","assets/sprites/doors/doors.png",{frameWidth:64,frameHeight:82}),this.load.spritesheet("core-tileset-spritesheet","assets/tilesets/core-tileset.png",{frameHeight:32,frameWidth:32}),this.load.image("core-tileset","assets/tilesets/core-tileset.png"),this.load.tilemapTiledJSON("woollards-farm","assets/tilemaps/woollards-farm.json"),this.load.tilemapTiledJSON("woollards-house","assets/tilemaps/woollards-house.json"),this.load.image("textbox","assets/sprites/conversations/textbox.png"),this.load.json("signs","assets/signs.json"),this.load.image("conversation-box","assets/sprites/conversations/conversation-box.png"),this.load.json("conversations","assets/conversations.json"),this.load.spritesheet("healthbar","assets/sprites/ui/healthbar.png",{frameWidth:124,frameHeight:22})}},{key:"create",value:function(){this.scene.start(sn.title)}}])&&Go(n.prototype,o),r&&Go(n,r),t}();function Jo(e){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qo(e,t){return!t||"object"!==Jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $o(e,t){return($o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var er={5:0,4:1,3:2,2:3,1:4},tr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=qo(this,Qo(t).call(this,{key:sn.hud}))).healthListenerCleanupFn=void 0,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$o(e,t)}(t,Te),n=t,(o=[{key:"init",value:function(){var e=this;this.events.once(Phaser.Scenes.Events.SHUTDOWN,function(){return e.shutdown()})}},{key:"create",value:function(){var e=this.add.sprite(80,25,"healthbar",0);this.healthListenerCleanupFn=this.persistence.adventurer.onChange("health",function(t){e.setFrame(er[t])})}},{key:"shutdown",value:function(){this.healthListenerCleanupFn&&this.healthListenerCleanupFn()}}])&&Zo(n.prototype,o),r&&Zo(n,r),t}();function nr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var or=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitmapText=void 0,this.bitmapText=t.add.bitmapText(n.x,n.y,n.font,n.text),n.origin&&this.bitmapText.setOrigin(n.origin)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.bitmapText.destroy()}}])&&nr(t.prototype,n),o&&nr(t,o),e}();function rr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ir=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indicator=void 0;var r=n.indicatorSide||pn.TOP,i=o.getComponent(or).bitmapText;this.indicator=new wn(t,i,r),this.indicator.hide()}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){this.indicator.destroy()}}])&&rr(t.prototype,n),o&&rr(t,o),e}();function ar(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var sr=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=void 0,this.disabled=void 0,this.callback=n.menuActionCallback,this.disabled=n.menuActionDisabled}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){delete this.callback}}])&&ar(t.prototype,n),o&&ar(t,o),e}();function cr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ur=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.selectedIndex=void 0,this.menuOptions=void 0,this.scene=t,this.selectedIndex=0,this.menuOptions=[]}var t,n,o;return t=e,(n=[{key:"start",value:function(e){var t=this;this.menuOptions=e.getEntities("menuButton"),this.scene.controls.up.onPress(function(){return t.changeMenuSelector("up")}),this.scene.controls.down.onPress(function(){return t.changeMenuSelector("down")}),this.scene.controls.action.onPress(function(){return t.selectMenuOption()}),this.selectFirstEnabledIndicatorPosition()}},{key:"selectFirstEnabledIndicatorPosition",value:function(){var e=this.menuOptions.findIndex(function(e){return!e.getComponent(sr).disabled});this.updateIndicatorPosition(e)}},{key:"changeMenuSelector",value:function(e){var t="up"===e?-1:1,n=0,o=this.selectedIndex,r=this.selectedIndex;do{if(n++,r=Phaser.Math.Wrap(this.selectedIndex+t,0,this.menuOptions.length),n===this.menuOptions.length){r=o;break}}while(this.menuOptions[r].getComponent(sr).disabled);r!=o&&this.updateIndicatorPosition(r)}},{key:"updateIndicatorPosition",value:function(e){this.menuOptions[this.selectedIndex].getComponent(ir).indicator.hide(),this.selectedIndex=e,this.menuOptions[this.selectedIndex].getComponent(ir).indicator.show()}},{key:"selectMenuOption",value:function(){this.menuOptions[this.selectedIndex].getComponent(sr).callback()}}])&&cr(t.prototype,n),o&&cr(t,o),e}();function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hr(this,pr(t).call(this,{key:sn.title}))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,Te),n=t,(o=[{key:"init",value:function(){this.phecs.phEntities.registerPrefab("menuTitle",{components:[or]}),this.phecs.phEntities.registerPrefab("menuButton",{components:[or,ir,sr]}),this.phecs.phSystems.registerSystems([ur])}},{key:"create",value:function(){this.add.image(0,0,"title-screen").setOrigin(0,0),this.add.image(0,0,"vignette-effect").setOrigin(0,0).setAlpha(.1),this.phecs.phEntities.createPrefab("menuTitle",{x:400,y:160,origin:.5,font:"compass-72-title",text:"Archer Adventure"}),this.createMenuButtons(),this.phecs.start(),this.controls.start()}},{key:"createMenuButtons",value:function(){var e=this,t=[{text:"Continue Game",menuActionDisabled:!this.persistence.hasSaveGame(),menuActionCallback:function(){e.phecs.stop(),e.scene.stop(),e.scene.start(sn.continueGame)}},{text:"New Game",menuActionCallback:function(){e.phecs.stop(),e.scene.stop(),e.scene.start(sn.newGame)}}],n=250;t.map(function(t){var o=e.phecs.phEntities.createPrefab("menuButton",{x:400,y:n,origin:.5,font:"compass-24",text:t.text,indicatorSide:pn.LEFT,menuActionDisabled:t.menuActionDisabled,menuActionCallback:t.menuActionCallback});t.menuActionDisabled&&(o.getComponent(or).bitmapText.alpha=.5),n+=40})}}])&&fr(n.prototype,o),r&&fr(n,r),t}();function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function br(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),br(this,gr(t).call(this,{key:sn.newGame}))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(t,Te),n=t,(o=[{key:"create",value:function(){this.persistence.resetSaveGame(),this.persistence.adventurer.maxHealth=5,this.persistence.adventurer.health=5,this.persistence.location.areaKey="woollards-farm",this.persistence.location.markerName="adventurerStart",this.persistence.save(),this.scene.start(sn.continueGame)}}])&&mr(n.prototype,o),r&&mr(n,r),t}();function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Er=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pr(this,Or(t).call(this,{key:sn.continueGame}))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(t,Te),n=t,(o=[{key:"create",value:function(){this.persistence.load(),this.persistence.adventurer.health=this.persistence.adventurer.maxHealth;var e={areaKey:this.persistence.location.areaKey,markerName:this.persistence.location.markerName};this.scene.start(sn.exploration,e)}}])&&kr(n.prototype,o),r&&kr(n,r),t}(),jr={width:800,height:450,plugins:{global:[{key:"NinePatchPlugin",plugin:o.NinePatchPlugin,start:!0},{key:"ParallaxSpritePlugin",plugin:A,start:!0},{key:"PersistencePlugin",plugin:ne,mapping:"persistence",start:!0}],scene:[{key:"StateRegistrar",plugin:ke,mapping:"stateRegistrar"},{key:"Phecs",plugin:me,mapping:"phecs"},{key:"Controls",plugin:k,mapping:"controls"},{key:"AreaManager",plugin:p,mapping:"areaManager"}]},scene:[Wo,dr,Cr,Er,_o,tr,Do,zo],pixelArt:!0,physics:{default:"arcade",arcade:{debug:!1,gravity:{y:1100}}}};new Phaser.Game(jr)}});